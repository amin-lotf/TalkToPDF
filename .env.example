# Database connection (required)
# Use asyncpg driver for async SQLAlchemy support
SQLALCHEMY_DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/talk_to_pdf

# Test database (optional, used by pytest)
TEST_SQLALCHEMY_DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/talk_to_pdf_test

# Security settings
JWT_SECRET_KEY=change-me-to-a-secure-random-string
JWT_ALGORITHM=HS256


# File storage
# Directory for uploaded PDFs and indexing artifacts
FILE_STORAGE_DIR=tmpstorage

# OpenAI API key (required)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Embedding configuration
EMBED_PROVIDER=openai
EMBED_MODEL=text-embedding-3-small
EMBED_BATCH_SIZE=16
# Set to specific dimension or leave as None for model default
EMBED_DIMENSIONS=None

# Chunking configuration
CHUNKER_KIND=block
CHUNKER_MAX_CHARS=3000
CHUNKER_OVERLAP=500

# Retrieval limits
MAX_TOP_K=20
MAX_TOP_N=5

# Reply generation
REPLY_PROVIDER=openai
REPLY_MODEL=gpt-4o-mini
REPLY_TEMPERATURE=0.2
# Optional limit on output tokens (None for no limit)
REPLY_MAX_OUTPUT_TOKENS=None
REPLY_MAX_CONTEXT_CHARS=20000

# Query rewriting
QUERY_REWRITER_PROVIDER=openai
QUERY_REWRITER_MODEL=gpt-4o-mini
QUERY_REWRITER_TEMPERATURE=0.2
QUERY_REWRITER_MAX_TURN=6
QUERY_REWRITER_MAX_HISTORY_CHARS=6000

# Reranking
RERANKER_PROVIDER=openai
RERANKER_MODEL=gpt-4o-mini
RERANKER_TEMPERATURE=0.0

# Retrieval merger weights (must sum to 1.0)
RETRIEVAL_MERGER_WEIGHT_VEC=0.65
RETRIEVAL_MERGER_WEIGHT_FTS=0.35

# External services
# Grobid PDF extraction service
GROBID_URL=http://localhost:8070

# Frontend configuration
# API endpoint used by Streamlit frontend
API_BASE_URL=http://127.0.0.1:8000/api/v1
